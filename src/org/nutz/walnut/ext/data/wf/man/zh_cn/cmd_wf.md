# 命令简介

`wf` 处理工作流。它是过滤型命令。加载一个工作流配置文件，以及相关上下文变量。
对目标对象执行自动设置或者对关联数据进行自动处理。

首先工作流一定会加载一个工作流文件，其格式为：

```js
{
  // 这里定义了一个工作流全部的节点，为了唯一标识，这里将采用散列存储节点
  nodes: {
    "B01" : {
      // 定义了节点类型
      // - HEAD   : 起始节点
      // - STATE  : 状态节点
      // - ACITON : 动作节点
      // - TAIL   : 结束节点
      type: "STATE"

      // 当切换到当前节点时，需要预先制行的动作
      // 这个参看 ReactAction
      actions: [
        {/* 每一个都是 ReactAction */}
      ]
    }
  },
  // 这里定义了工作流节点的连接
  edges: {
    "N0" : {
      // 定义了 N0 -> N1 的一条单向边
      "N1" : {
        // 边连通的测试条件
        test: AutoMatch
        // 定义了这条单向边通过时的特殊动作
        actions: [
          {/* 每一个都是 ReactAction */}
        ]
      }
    }
  }
}
```
  
# 用法

```
wf [/path/to/workflow.json ...] [-get xx.xx] @[var|process|...]
```

多个路径读取，是一个`fallback`尝试路径。


无论是从文件读取的工作流，还是从标准输入里读取的，都可以通过 `-get` 指定读取这个对象的一部分作为工作流内容。
这样，一个文件或者标准输入，可以承载工作流定义，以及上下文变量两部分信息。

# 过滤器列表

```bash
@var        # 加载上下文变量
@current    # 根据上下文变量，确定工作流当前节点的名称
@process    # 执行一步工作流
@view       # 查看当前上下文中的信息
@create     # 根据工作流上下文创建一个标准对象
@update     # 根据工作流上下文更新一个标准对象
@thc        # 根据工作流上下文创建一个数据集对象
@thu        # 根据工作流上下文更新一个数据集对象
```
