---
title : Walnut数据备份与导出的测试
author: wendal
author: zozoh
---

# 测试场景归类

- `开发同步` : 本地开发目录与云端同步
- `数据搬迁` : 整域的数据搬迁
  + 域数据备份定期冷备份
- `增量备份` : 浏览器（客户端）对于关键目录的增量备份与还原

## 普通场景1 - 文件增减

文件夹下有2个文件A和B, 分别进行如下操作后, 进行"备份", "还原"

```
- $待备份目录
    - 文件A
    - 文件B
```

文件操作

```
1. 删除
2. 更新
3. 重命名
4. 使用另外一个文件覆盖
5. 元数据修改
```

------------------------------------------
# 场景S0:最基础测试

所有用例执行完后都执行检查 `执行还原(B0, Tree1-Tree3,Obj1-Obj4)`
然后查看是否符合预期

## 初始数据

```bash
#----------------------
# 文件树
DIR
|-- fileA
|-- fileB
#----------------------
# > 创建备份 `B0`
```

## Case: S0.a

```bash
1. 删除 fileA
```

## Case: S0.b

```bash
1. 更改 fileA 内容
```

## Case: S0.c

```bash
1. 新增 fileC
```

------------------------------------------
# 场景S1:文件树结构修改

## 初始数据

```bash
#----------------------
# 文件树
DIR
|-- A1
|-- B1/
|   |-- A2
|   |-- A3
|-- B2/
    |-- A4
    |-- C1 (ln-> DIR/B1/A2)
#----------------------
# > 创建备份 `B0`
```

## Case: S1.a

```bash
1. 删除 B1
```

## Case: S1.b

```bash
1. 删除 B1/*
```

## Case: S1.c

```bash
1. 将 B1 改名为 NN
```

## Case: S1.d

```bash
1. 将 B1/* Copy 到 B2
2. 删除 B1
```

------------------------------------------
# 场景S2:对象种族改变

## 初始数据

```bash
#----------------------
# 文件树
DIR
|-- A1
|-- B1/
|   |-- A2
|   |-- A3
|-- B2/
    |-- A4
    |-- C1 (ln-> DIR/B1/A2)
#----------------------
# > 创建备份 `B0`
```

## Case: S2.a

```bash
1. 删除 A1
2. 创建目录 A1/
```

## Case: S2.b

```bash
1. 删除 A1
2. 创建链接文件 A1 -> B2/A4
```

## Case: S2.c

```bash
1. 删除 B1
2. 创建文件 B1
```

## Case: S2.d

```bash
1. 删除 C1
2. 创建文件 C1
```

## Case: S2.e

```bash
1. 删除 C1
2. 创建目录 C1
```

## Case: S2.f

```bash
1. 删除 B1
2. 创建链接文件 B1 -> B2/A4
```


## 特殊场景2 - 文件重建

删除, 然后重新创建文件

------------------------------------------
# 场景S3:文件重建

## 初始数据

```bash
#----------------------
# 文件树
DIR
|-- A1
|-- B1/
    |-- A2
    |-- A3
#----------------------
# > 创建备份 `B0`
```

## Case: S3.a

```bash
1. 删除 A1
2. 创建文件 A1 并写入数据
```

> ! 只测试 `R4` 的情况

------------------------------------------
# 场景S4:还原到指定目录

## 初始数据

```bash
#----------------------
# 文件树
DIR
|-- A1
|-- B1/
|   |-- A2
|   |-- A3
|-- B2/
    |-- A4
    |-- C1 (ln-> DIR/B1/A2)
#----------------------
# > 创建备份 `B0`
```

## Case: S4.a

```bash
# 什么都不做，直接还原到某个指定目录，看看目录结构对不对
```


