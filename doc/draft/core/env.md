---
title:环境变量
author:zozoh
tags:
- 系统
- 会话
- 环境变量
---

# 什么是环境变量

当用户登录以后，在 `ZSession` 里面会存放一组名值对，作为当前会话的环境变量。
这组名值对用户可以通过 `SET` 命令随意修改。环境变量名是大小写敏感的。

环境变量分作两种:

* 系统环境变量：存放于 `/etc/.env` 路径下
* 用户环境变量：存放于 `$HOME/.env` 路径下

环境变量对象类型为 `"env"`。它的内容是一个 `MultiLineProperties` 形式的属性文件:

    /home/xiaobai/.env 的内容:
    -----------------------------------------
    HOME=/home/xiaobai
    i18n=zh-cn
    TMPDIR=$HOME/.tmp
    LOGIN_UI=ui/console/console
    PATH=$PATH:~/bin

当用户登录后，系统环境变量与用户环境变量会被合成位一个 Map 记录在 `ZSession` 里。其中用户环境变量更优先。

# 变量的赋值

通过 `.env` 文件，你可以指定你的环境变量初始值。环境变量值就是普通字符串，其中 `~` 字符表示用户的家目录，即 `$HOME`  所代表的值。

当用户登录后，系统还会分配几个动态的环境变量:

* `$USER` - 你的登录账号
* `$ME` - 通常为 `$USER` 的别名
* `$PWD` - 为你当前的操作目录，当你登录后，通常为 `~`

如果你没有声明 `$HOME` 环境变量，那么系统会用 `/home/$USER` 代替。 如果你指定的 `$HOME` 没有权限访问，系统则禁止你登录。

和 Linux/Unix 系统一样，通过 `SET` 命令可以改变环境变量的值，具体用法类似

    SET PATH=~/sbin

设置的值就是普通字符串，当前你可以通过 `$XXX` 和 `~` 在字符串中再引用其它环境变量的值。
当然，如果想显示环境变量，你可以通过:

    echo $PATH

同时系统也为环境变量提供了更完整的操作，即 `env` 命令:

    env              # 显示所有环境变量
    env set a=100    # 设置环境变量，格式 env set 表达式
    env rm  a,b,c    # 移除一个或多个环境变量
    env clear        # 移除全部环境变量
    env get a        # 输出某个环境变量的值
    #
    # 将所有的当前会话中的环境变量存储到文件里，如果没有给定文件，则默认存放在 ~/.env 里
    env save [/path/to/file]
    #
    # 将文件里的环境变量加载到当前会话里，如果没有给定文件，则从 ~/.env 里读取
    env load [/path/to/file]
    




