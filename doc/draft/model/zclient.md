---
title: 客户端模块
author: zozoh
---

# 客户端模块概述

客户端模块描述了一个用户与服务器通讯的关键信息。

# Backbone.Model

    {
        //............................................
        // 应用信息
        app : {
            name    : "console", // 应用的名称
            session : {..},      // 会话信息
            obj     : {..},      // 用户指定的起始对象，默认null
            requires: [          // 依赖的 JS 模块，一般为模块和UI两个
                "model/zclient", 
                "ui/console/console""
            ]    
        }
        //............................................
        // 历史记录
        history : [
            "ls -l",
            "cat ~/.env"
        ]
        //............................................
    }

模块支持如下消息:

    //----------------------------------------------
    // 模块初始化消息。得到这个消息，zclient 将触发一系列消息
    // 触发界面的显示
    "ready"
    //----------------------------------------------
    // 等待命令输入，这个消息一般由界面模块响应
    // 由 zclient 模块发出，收到这个消息，界面应该处于可以
    // 随时响应用户输入的状态
    "cmd:wait" (app)
    //----------------------------------------------
    // 执行命令。这个消息一般由界面模块发出，由 zclient 响应
    // 收到这个消息， zclient 会连接服务器进行消息处理
    // 并根据服务的返回，触发自身各种消息，比如 "show:info" 等
    "cmd:exec" ("command string")
    //----------------------------------------------
    // 屏幕控制
    "screen:clear"            // 清空屏幕内容
    //----------------------------------------------
    // 显示信息
    "show:info" (msg)         // 显示信息
    "show:err"  (msg)         // 显示错误信息
    "show:text" (txt)         // 显示文本
    "show:form" (PID, form)   // 显示表单
    //----------------------------------------------
    // 文件上传
    "do:upload" ({
        target : {..},        // 上传的目标，一个 OBJ 对象
        multi  : true,        // 多个文件，dest 表示一个目录
        name   : "$REGEX",    // 名称的正则表达式校验
        type   : "$REGEX",    // 类型的校验
        mime   : "$REGEX"     // 内容类型的校验
    })
    //----------------------------------------------
    // 表单提交
    "form:submit" (PID, answer) // 提交表单
    //----------------------------------------------
    // 显示对象
    "objs:begin" (blockId, {..})   // 开始显示一组对象
        选项为:
        {
            mode : "long|short"    // 显示模式
        }
    "objs:add"   (blockId, obj)    // 添加一个对象
    "objs:end"   (blockId)         // 结束一组对象的显示
    //----------------------------------------------
    // 用指定的应用程序打开文件或文件夹
    "open" (app, obj)
        所谓 app 实际上是一个文件夹，服务器会给出下面的 JSON 结构
        {
            "/"      : {...},   // app文件夹对象的 Obj
            "/ui.js" : {...},   // 界面的 
            "/"  ... 呃 ... 让我再想想
        }







    





















