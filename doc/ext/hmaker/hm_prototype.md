---
title:原型机制
author:zozoh
tags:
- 扩展
- hmaker
---

# 什么是网站原型

网站原型就是个已经预先定制好的站点，程序根据用户的输入，将这个站点的全部或者部分内容作为模板渲染并 Copy 目标站点编辑目录

```
~/.hmaker/prototype      # 原型存放的目录
    protoName            # 原型的名称
        _preview         # 放一些原型的预览图，按图片名排序
        proto.json       # 原型的一些说明信息
        lib              # 原型的 lib 目录，引入相关页面时必须有对应项，否则从这里 Copy
        _page            # 原型的页面母版
        image            # 原型需要引用的图片文件
        css              # 原型用到的 css 文件
        js               # 原型用到的 js 文件
```

# proto.json:原型的说明

```
skinName : "xxxx",         // 原型默认推荐采用的皮肤
skins : ["xxx", "xxx"]     // 原型用到的皮肤选择器列表
                           // 如果不能全部匹配上的皮肤，引入的时候会有警告
```

# 引入原型的流程

```
1. 选择原型（用户）和目标站点（包括名称）
2. 自动为用户生成一个图标，允许用户上传和修改颜色
3. 检查目标站点皮肤与原型皮肤的匹配
    a. 如果目标站点为新站点，直接更新皮肤过去，当然如果用户没这个皮肤，则报错
    b. 根据用户选定的色系，为用户生成皮肤变量文件
4. 根据 _page 总结出用户网站的功用，以供用户选择，以便准备目标页面列表
5. 进入页面引入流程

----------- 多个页面引入流程 ------------
1. 检查页面重名
2. 检查页面用到的组件，如果不存在，提示用户选择还是 copy，如果组件库为空，直接 copy
3. 检查 image/css/js 的重名，并提示用户是否覆盖还是跳过
4. 循环进入单个页面引入流程

----------- 单个页面引入流程 ------------
1. 根据页面母版总结出要设定的变量
2. 循环让用户添入这些变量
3. 生成页面至目标目录
```









